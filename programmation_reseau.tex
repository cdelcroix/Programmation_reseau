%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LaTeX Example: Project Report
%
% Source: http://www.howtotex.com
%
% Feel free to distribute this example, but please keep the referral
% to howtotex.com
% Date: March 2011 
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Edit the title below to update the display in My Documents
%\title{Project Report}
%
%%% Preamble
\documentclass[paper=a4, fontsize=12pt]{article}
\usepackage[T1]{fontenc}
\usepackage{fourier}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{listings}


% English language/hyphenation
\usepackage[protrusion=true,expansion=true]{microtype}	
\usepackage{amsmath,amsfonts,amsthm} % Math packages
\usepackage[pdftex]{graphicx}	
\usepackage{url}
\usepackage[bottom=10em]{geometry}
\usepackage{float}
\usepackage{xcolor}
\usepackage{enumitem}
\renewcommand\descriptionlabel[1]{\textbf{#1 :}}
\usepackage{pdfpages}
\usepackage{rotating}

%%% Custom sectioning
%\usepackage{sectsty}
%\allsectionsfont{\normalfont\scshape}

%% Language definition package (for XML Annexe)
\usepackage{listings}
\usepackage{color}

%% Local modification of margins
\newenvironment{changemargin}[2]{\begin{list}{}{%
      \setlength{\topsep}{0pt}%
      \setlength{\leftmargin}{0pt}%
      \setlength{\rightmargin}{0pt}%
      \setlength{\listparindent}{\parindent}%
      \setlength{\itemindent}{\parindent}%
      \setlength{\parsep}{0pt plus 1pt}%
      \addtolength{\leftmargin}{#1}%
      \addtolength{\rightmargin}{#2}%
    }\item }{\end{list}}
%%

%%% Custom headers/footers (fancyhdr package)
%\usepackage{fancyhdr}
%\pagestyle{fancyplain}
%\fancyhead{}											% No page header
%\fancyfoot[L]{}											% Empty 
%\fancyfoot[C]{}											% Empty
%\fancyfoot[C]{\thepage}									% Pagenumbering
%\renewcommand{\headrulewidth}{0pt}			% Remove header underlines
%\renewcommand{\footrulewidth}{0pt}				% Remove footer underlines
%\setlength{\headheight}{13.6pt}


%%% Equation and float numbering
\numberwithin{equation}{section}		% Equationnumbering: section.eq#
\numberwithin{figure}{section}			% Figurenumbering: section.fig#
\numberwithin{table}{section}				% Tablenumbering: section.tab#

%Graphics path
%\graphicspath{./Images/}

%%% Maketitle metadata
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} 	% Horizontal rule

\title{
  %\vspace{-1in} 			
  \usefont{OT1}{bch}{b}{n}
  \horrule{1.5pt} \\[0.5cm]	
  \Huge \textbf{Rapport final} \\ [10pt]
  \Huge PFA - De la 3D vers la 2D \\ [15pt]
  \LARGE Année scolaire 2014-2015 \\ 
  \horrule{1.5pt} \\[0.5cm]
  %
}

\author{
  \huge \underline{Client} : \LARGE BLANC Carole, DESBARATS Pascal\\ [10pt] 
  \huge \underline{Encadrant} : \LARGE LOMBARDY Sylvain\\[20pt]
  \normalfont 							
  \huge \textbf{Equipe} : \Large BOHER Anaïs - CABON Yohann - CHAUVAT Magali \\[5pt]
  \Large LEVY Akané - MARCELIN Thomas \\[5pt]
  \Large MAUPEU Xavier - PHILIPPI Alexandre \\[10pt]		\normalsize
}
\date{}

%%% Begin document
\begin{document}
\maketitle
\newpage

\tableofcontents

\newpage

\section{But des travaux pratiques}
Le but de ces TP est de maîtriser la programmation réseau par sockets par sockets en langage C sous UNIX.
\section{Utilisation des commandes unix}
\subsection{Utilisation des commandes d'analyse réseau}
Le but de nestat est de nous informer de tous les services qui tournent sur la machine. Les services sont alors divises en trois paquets: NTP, socket du domaine UNIX et TCP.
\\netstat-a affiche la table de routage IP du noyau
\\telnet a pour but de se connecter à distance à une machine (nous utilisons pour le test de serveur).
\subsection{Etude de quelques services Internet}
telnet www.enseirb.fr 80 puis en appuyant sur entrée cela nous fait "sauter une ligne". En appuyant sur espace puis entrée cela nous affiche le code html de la page visitée puis cela nous ferme la connection.
\\Après avoir récupéré index.html, le code de retour est "200". Ce code nous indique qu'il n'y a pas eu d'erreur.
\section{Séances 1, 2 et 3: Programmation réseau par sockets}
\subsection{Analyse d'un programme client TCP}
On utilise une socket de type TCP. En effet SOCK_STREAM dans le code. 
Client TCP.Normallement:
socket()
connect()
write/read()
On retrouve l'enchaînement suivant sur le fichier
But du programme: code d'erreur 331, on demande d'établir une connection, il nous demande un mot de passe.
% vérifier programme d'origine
% ajouter copie écran
\subsection{Client TCP ftp myftp}
%code source myftp.c
%Q4
\subsection{Client TCP mydateTCP}
Numéro de port: 13 Protocole de transport internet: TCP
(pour lancer le programme ./mydateTCP brahmane-enseirb.fr)
%copie écran .
-> On change le port 13 -> 21
\subsection{Client UDP mydateUDP}
%cf Adrian
On modifie SOCK_STEAM par SOCK_DGRAM
Programme réalisé:
\begin{lstlisting}
sendto(sd,buf,sizeof(buf),0,(struct sockaddr*)&sa,sizeof(sa));
\end{lstlisting}
i=sizeof(sa);
n=recvfrom(sd,buf,sizeof(buf),0,(struct sockaddr*)&sa,&i);
write(1,buf,n);
\subsection{Analyse d'un programme serveur TCP}
Socket utilisé: TCP
socket()
bind()
listen()
accept()
read/write()
\\On retrouve l'enchaînement classique des appels systèmes.
\\Ce programme compte le nombre de connexion.
./pingserveur0 22222
telnet localhost 22222
%copie d'écran Q7
%copie d'écran Q7bis
\subsection{Serveur TCP pingserveurTCP}
%copie fichier
%copie d'écran Q8)
%copie d'écran Q8bis)
On ne peut pas prendre n'importe quel valeur de port. EN effet certain sont déjà attribués.
newsd->client
while(1){
int n=read(newsd,buf,sizeof(buf));
write(1,buf,n);
write(newsd,buf,n);
}
Les valeurs des ports en cours d'utilisation ne peuvent être prises.
\subsection{Serveur UDP pingserveurUDP, client TCP pingclientUDP}
%cf Adrian
\subsection{Serveur wwwserveur}
Protocole HTTP.
%Q10)
\subsection{Serveur TCP lotoserveur}

%%% End document
\end{document}
